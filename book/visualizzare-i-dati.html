<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Visualizzare i dati | Note di R</title>
  <meta name="description" content="Questo libro riassume il contenuto del laboratorio di R del corso di Probabilità e Statistica Matematica dell’anno accademico 2018/2019" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Visualizzare i dati | Note di R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Questo libro riassume il contenuto del laboratorio di R del corso di Probabilità e Statistica Matematica dell’anno accademico 2018/2019" />
  <meta name="github-repo" content="rstudio/book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Visualizzare i dati | Note di R" />
  
  <meta name="twitter:description" content="Questo libro riassume il contenuto del laboratorio di R del corso di Probabilità e Statistica Matematica dell’anno accademico 2018/2019" />
  

<meta name="author" content="Federico Reali" />


<meta name="date" content="2019-06-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lavorare-con-i-dati.html">
<link rel="next" href="fare-pratica-con-i-dati.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Note di R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Premessa</a></li>
<li class="chapter" data-level="1" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html"><i class="fa fa-check"></i><b>1</b> Primi passi con R</a><ul>
<li class="chapter" data-level="1.1" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#perche-r"><i class="fa fa-check"></i><b>1.1</b> Perché R</a></li>
<li class="chapter" data-level="1.2" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#installare-r"><i class="fa fa-check"></i><b>1.2</b> Installare R</a></li>
<li class="chapter" data-level="1.3" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#installare-r-1"><i class="fa fa-check"></i><b>1.3</b> Installare R</a></li>
<li class="chapter" data-level="1.4" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#usare-r"><i class="fa fa-check"></i><b>1.4</b> Usare R</a></li>
<li class="chapter" data-level="1.5" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#installare-r-studio"><i class="fa fa-check"></i><b>1.5</b> Installare R Studio</a></li>
<li class="chapter" data-level="1.6" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#usare-r-studio"><i class="fa fa-check"></i><b>1.6</b> Usare R Studio</a></li>
<li class="chapter" data-level="1.7" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#link-utili"><i class="fa fa-check"></i><b>1.7</b> Link utili</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html"><i class="fa fa-check"></i><b>2</b> Primi comandi di R</a><ul>
<li class="chapter" data-level="2.1" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#operazioni-aritmetiche"><i class="fa fa-check"></i><b>2.1</b> Operazioni Aritmetiche</a></li>
<li class="chapter" data-level="2.2" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#esponenziale-e-logaritmi"><i class="fa fa-check"></i><b>2.2</b> Esponenziale e logaritmi</a></li>
<li class="chapter" data-level="2.3" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#funzioni-trigonometriche"><i class="fa fa-check"></i><b>2.3</b> Funzioni Trigonometriche</a></li>
<li class="chapter" data-level="2.4" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#assegnazione-e-vettori"><i class="fa fa-check"></i><b>2.4</b> Assegnazione e vettori</a></li>
<li class="chapter" data-level="2.5" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#sequenze"><i class="fa fa-check"></i><b>2.5</b> Sequenze</a></li>
<li class="chapter" data-level="2.6" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#operazioni-su-vettori"><i class="fa fa-check"></i><b>2.6</b> Operazioni su vettori</a></li>
<li class="chapter" data-level="2.7" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#operatori-relazionali-e-logici"><i class="fa fa-check"></i><b>2.7</b> Operatori relazionali e logici</a></li>
<li class="chapter" data-level="2.8" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#matrici"><i class="fa fa-check"></i><b>2.8</b> Matrici</a></li>
<li class="chapter" data-level="2.9" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#stringhe-vettori-di-caratteri"><i class="fa fa-check"></i><b>2.9</b> Stringhe (vettori di caratteri)</a></li>
<li class="chapter" data-level="2.10" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#liste-e-data-frame"><i class="fa fa-check"></i><b>2.10</b> Liste e data frame</a></li>
<li class="chapter" data-level="2.11" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#programmazione-in-r"><i class="fa fa-check"></i><b>2.11</b> Programmazione in R</a></li>
<li class="chapter" data-level="2.12" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#esercizi"><i class="fa fa-check"></i><b>2.12</b> Esercizi</a></li>
<li class="chapter" data-level="2.13" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#link-utili-1"><i class="fa fa-check"></i><b>2.13</b> Link utili</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lavorare-con-i-dati.html"><a href="lavorare-con-i-dati.html"><i class="fa fa-check"></i><b>3</b> Lavorare con i dati</a><ul>
<li class="chapter" data-level="3.1" data-path="lavorare-con-i-dati.html"><a href="lavorare-con-i-dati.html#pacchetti"><i class="fa fa-check"></i><b>3.1</b> Pacchetti</a></li>
<li class="chapter" data-level="3.2" data-path="lavorare-con-i-dati.html"><a href="lavorare-con-i-dati.html#manipolare-dati"><i class="fa fa-check"></i><b>3.2</b> Manipolare dati</a></li>
<li class="chapter" data-level="3.3" data-path="lavorare-con-i-dati.html"><a href="lavorare-con-i-dati.html#missing-data"><i class="fa fa-check"></i><b>3.3</b> Missing data</a></li>
<li class="chapter" data-level="3.4" data-path="lavorare-con-i-dati.html"><a href="lavorare-con-i-dati.html#manipolare-i-dati"><i class="fa fa-check"></i><b>3.4</b> Manipolare i dati</a></li>
<li class="chapter" data-level="3.5" data-path="lavorare-con-i-dati.html"><a href="lavorare-con-i-dati.html#distribuzioni-di-probabilita"><i class="fa fa-check"></i><b>3.5</b> Distribuzioni di probabilità</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html"><i class="fa fa-check"></i><b>4</b> Visualizzare i dati</a><ul>
<li class="chapter" data-level="4.1" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#box-plot"><i class="fa fa-check"></i><b>4.1</b> Box plot</a></li>
<li class="chapter" data-level="4.2" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#istogrammi-e-scatter-plost"><i class="fa fa-check"></i><b>4.2</b> Istogrammi e scatter plost</a></li>
<li class="chapter" data-level="4.3" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#analizzare-il-dataset-body-temperature"><i class="fa fa-check"></i><b>4.3</b> Analizzare il dataset Body Temperature</a></li>
<li class="chapter" data-level="4.4" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#visualizzare-il-dataset-bodytemperature"><i class="fa fa-check"></i><b>4.4</b> Visualizzare il dataset BodyTemperature</a></li>
<li class="chapter" data-level="4.5" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#analizzare-il-dataset-pima.tr2"><i class="fa fa-check"></i><b>4.5</b> Analizzare il dataset Pima.tr2</a></li>
<li class="chapter" data-level="4.6" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#visualizzare-il-dataset-pima.tr2"><i class="fa fa-check"></i><b>4.6</b> Visualizzare il dataset Pima.tr2</a></li>
<li class="chapter" data-level="4.7" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#esercizi-1"><i class="fa fa-check"></i><b>4.7</b> Esercizi</a></li>
<li class="chapter" data-level="4.8" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#link-utili-2"><i class="fa fa-check"></i><b>4.8</b> Link utili</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="fare-pratica-con-i-dati.html"><a href="fare-pratica-con-i-dati.html"><i class="fa fa-check"></i><b>5</b> Fare pratica con i dati</a><ul>
<li class="chapter" data-level="5.1" data-path="fare-pratica-con-i-dati.html"><a href="fare-pratica-con-i-dati.html#inquinamento-a-san-andreas"><i class="fa fa-check"></i><b>5.1</b> Inquinamento a San Andreas</a></li>
<li class="chapter" data-level="5.2" data-path="fare-pratica-con-i-dati.html"><a href="fare-pratica-con-i-dati.html#inquinamento-in-california"><i class="fa fa-check"></i><b>5.2</b> Inquinamento in California</a></li>
<li class="chapter" data-level="5.3" data-path="fare-pratica-con-i-dati.html"><a href="fare-pratica-con-i-dati.html#inquinamento-a-los-angeles"><i class="fa fa-check"></i><b>5.3</b> Inquinamento a Los Angeles</a></li>
<li class="chapter" data-level="5.4" data-path="fare-pratica-con-i-dati.html"><a href="fare-pratica-con-i-dati.html#esercizi-2"><i class="fa fa-check"></i><b>5.4</b> Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="regressione.html"><a href="regressione.html"><i class="fa fa-check"></i><b>6</b> Regressione</a><ul>
<li class="chapter" data-level="6.1" data-path="regressione.html"><a href="regressione.html#regressione-lineare"><i class="fa fa-check"></i><b>6.1</b> Regressione lineare</a></li>
<li class="chapter" data-level="6.2" data-path="regressione.html"><a href="regressione.html#stimare-beta_0-e-beta_1"><i class="fa fa-check"></i><b>6.2</b> Stimare <span class="math inline">\(\beta_0\)</span> e <span class="math inline">\(\beta_1\)</span></a></li>
<li class="chapter" data-level="6.3" data-path="regressione.html"><a href="regressione.html#valutare-il-modello-r2"><i class="fa fa-check"></i><b>6.3</b> Valutare il modello: <span class="math inline">\(R^2\)</span></a></li>
<li class="chapter" data-level="6.4" data-path="regressione.html"><a href="regressione.html#regressione-lineare-in-r"><i class="fa fa-check"></i><b>6.4</b> Regressione lineare in R</a></li>
<li class="chapter" data-level="6.5" data-path="regressione.html"><a href="regressione.html#regressione-multipla"><i class="fa fa-check"></i><b>6.5</b> Regressione multipla</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="esercitazione-1.html"><a href="esercitazione-1.html"><i class="fa fa-check"></i><b>7</b> Esercitazione 1</a><ul>
<li class="chapter" data-level="7.1" data-path="esercitazione-1.html"><a href="esercitazione-1.html#esercizi-3"><i class="fa fa-check"></i><b>7.1</b> Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Note di R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualizzare-i-dati" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Visualizzare i dati</h1>
<p><img src="media/Cholera.jpg" />
This <a href="https://it.wikipedia.org/wiki/John_Snow_(medico)">John Snow</a> knew something!</p>
<p>La visualizzazione dei dati permettere di individuare trend, connessioni e carpire informazioni dai dati che in forma tabulare non sono ovvie.</p>
<p>I comandi che seguono aiutano in tali indagini. Tutti questi comandi possono essere personalizzati usando diversi colori, personalizzando le label degli assi o affiancando le immagini.</p>
<p>Un pacchetto che permette non solo di produrre immagini (un po’ più belle), ma anche di utilizzare funzioni avanzate è <a href="http://ggplot2.org/">ggplot2</a> che però non tratteremo in questo corso.</p>
<p>Oltre ad introdurre alcune funzioni che permettono di ottenere dei grafici, esploreremo anche alcuni dataset.</p>
<div id="box-plot" class="section level2">
<h2><span class="header-section-number">4.1</span> Box plot</h2>
<p>A lezione abbiamo già incontrato i boxplot. Usando R è molto semplice produrre dei boxplot usando gli appositi comandi. Vediamoli usando il dataset <em>birthwt</em>, contenuto in MASS.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(MASS)
<span class="kw">boxplot</span>(birthwt<span class="op">$</span>bwt)</code></pre>
<p><img src="bookdown_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<p>La seguente notazione permette di produrre più boxplot relativi a bwt, divisi rispetto alla variabile race.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(bwt <span class="op">~</span><span class="st"> </span>race, <span class="dt">data =</span> birthwt )</code></pre>
<p><img src="bookdown_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<p><em>Esercizio</em>
Si investighi la variabile lwt rispetto a race e smoke.</p>
<p><em>Esercizio</em>
Si noti che il pacchetto <em>car</em> contiene una funzione chiamata <code>Boxplot()</code>, con la maiuscola, che vicino ai potenziali outliers indica l’indice dell’elemento. Si replichino i precedenti boxplot usando tale funzione.</p>
</div>
<div id="istogrammi-e-scatter-plost" class="section level2">
<h2><span class="header-section-number">4.2</span> Istogrammi e scatter plost</h2>
<p>Usando il comando <code>hist()</code> è possibile ottenere degli istogrammi per le variabili, passando gli argomenti in modo analogo ai boxplot.</p>
<p>Analogamente, con i comandi <code>plot(x,y)</code> or <code>scatterplot(x,y)</code> è possibile rappresentare i dati come punti.</p>
<p>Vedremo che questo può essere molto utile per ottenere degli indizi sulle relazioni tra variabili.</p>
</div>
<div id="analizzare-il-dataset-body-temperature" class="section level2">
<h2><span class="header-section-number">4.3</span> Analizzare il dataset Body Temperature</h2>
<p>BodyTemperature è un dataset che contiene la misurazione di quattro variabili (sesso, età, frequenza cardiaca e temperatura corporea ascellare) di 100 pazienti. Possiamo leggere importare il file specificando invece che il percorso, l’indirizzo url.</p>
<pre class="sourceCode r"><code class="sourceCode r">BodyTemperature &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="kw">url</span>(<span class="st">&#39;http://extras.springer.com/2012/978-1-4614-1301-1/BodyTemperature.txt&#39;</span>))</code></pre>
<p>Se però visualizziamo questo dataset qualosa non torna.
Il comando giusto specifica quale separatore viene considerato: in questo caso lo spazio, che è diverso da quello di default di <code>read.csv</code>. In modo analogo avremmo potuto leggere i dati usando <code>read.table()</code>. Tuttavia, controllaimo bene l’output per capire se effettivamente il dataset è stato letto nel modo giusto!</p>
<pre class="sourceCode r"><code class="sourceCode r">BodyTemperature &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="kw">url</span>(<span class="st">&#39;http://extras.springer.com/2012/978-1-4614-1301-1/BodyTemperature.txt&#39;</span>))</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">BodyTemperature &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="kw">url</span>(<span class="st">&#39;http://extras.springer.com/2012/978-1-4614-1301-1/BodyTemperature.txt&#39;</span>), <span class="dt">sep=</span> <span class="st">&quot; &quot;</span>)</code></pre>
<p>Esploriamo un po’ il dataset per capirne il contenuto e le variabili</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(BodyTemperature)</code></pre>
<pre><code>## &#39;data.frame&#39;:    100 obs. of  4 variables:
##  $ Gender     : Factor w/ 2 levels &quot;F&quot;,&quot;M&quot;: 2 2 2 1 1 2 1 1 1 2 ...
##  $ Age        : int  33 32 42 33 26 37 32 45 31 49 ...
##  $ HeartRate  : int  69 72 68 75 68 79 71 73 77 81 ...
##  $ Temperature: num  97 98.8 96.2 97.8 98.8 ...</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(BodyTemperature)</code></pre>
<pre><code>##   Gender Age HeartRate Temperature
## 1      M  33        69        97.0
## 2      M  32        72        98.8
## 3      M  42        68        96.2
## 4      F  33        75        97.8
## 5      F  26        68        98.8
## 6      M  37        79       101.3</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(BodyTemperature)</code></pre>
<pre><code>## [1] &quot;Gender&quot;      &quot;Age&quot;         &quot;HeartRate&quot;   &quot;Temperature&quot;</code></pre>
<p>Solo a scopo didattico, vediamo l’applicazione di uno dei comandi visti: <code>levels()</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">BodyTemperature<span class="op">$</span>GenderLong &lt;-<span class="st"> </span>BodyTemperature<span class="op">$</span>Gender
<span class="kw">levels</span>(BodyTemperature<span class="op">$</span>GenderLong) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Male&quot;</span>)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(BodyTemperature)</code></pre>
<pre><code>##  Gender      Age          HeartRate      Temperature    
##  F:51   Min.   :21.00   Min.   :61.00   Min.   : 96.20  
##  M:49   1st Qu.:33.75   1st Qu.:69.00   1st Qu.: 97.70  
##         Median :37.00   Median :73.00   Median : 98.30  
##         Mean   :37.62   Mean   :73.66   Mean   : 98.33  
##         3rd Qu.:42.00   3rd Qu.:78.00   3rd Qu.: 98.90  
##         Max.   :50.00   Max.   :87.00   Max.   :101.30</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(BodyTemperature[,<span class="op">-</span><span class="dv">1</span>])</code></pre>
<pre><code>## [1]  21.0 101.3</code></pre>
<p>In modo analogo possiamo cercare di ottenere la distanza interquartile per i gli elementi del dataset con <code>IQR(BodyTemperature[,2:4])</code>, tuttavia questo ci da errore.</p>
<p>Possiamo aggirare questa limitazione usando il comando <code>apply()</code>. La stessa funzione la possiamo usare per individuare, ad esempio, il valore minimo rispetto alle variabili (numeriche) e quale indice lo assume.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(BodyTemperature[,<span class="op">-</span><span class="dv">1</span>], <span class="dv">2</span>, IQR )</code></pre>
<pre><code>##         Age   HeartRate Temperature 
##        8.25        9.00        1.20</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(BodyTemperature[,<span class="op">-</span><span class="dv">1</span>], <span class="dv">2</span>, min )</code></pre>
<pre><code>##         Age   HeartRate Temperature 
##        21.0        61.0        96.2</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(BodyTemperature[,<span class="op">-</span><span class="dv">1</span>], <span class="dv">2</span>, which.min )</code></pre>
<pre><code>##         Age   HeartRate Temperature 
##          37          28           3</code></pre>
<p>Possiamo notare che la temperatura non è espressa in gradi Celsius (°C), bensì in Fahrenheit (F). Usando delle semplici operazioni di base possiamo trasformare le temperature in gradi Celsius e salvare questi nuovi dati nella colonna che chiamiamo <em>TempC</em>.</p>
<pre class="sourceCode r"><code class="sourceCode r">fromFtoC &lt;-<span class="st"> </span><span class="cf">function</span>(dataF) {
<span class="kw">return</span>((dataF <span class="op">-</span><span class="st"> </span><span class="dv">32</span>)<span class="op">*</span>(<span class="dv">5</span><span class="op">/</span><span class="dv">9</span>)) 
}
BodyTemperature<span class="op">$</span>TempC &lt;-<span class="st"> </span>(BodyTemperature<span class="op">$</span>Temperature <span class="dv">-32</span>)<span class="op">*</span><span class="dv">5</span><span class="op">/</span><span class="dv">9</span>

<span class="kw">head</span>(BodyTemperature)</code></pre>
<pre><code>##   Gender Age HeartRate Temperature    TempC
## 1      M  33        69        97.0 36.11111
## 2      M  32        72        98.8 37.11111
## 3      M  42        68        96.2 35.66667
## 4      F  33        75        97.8 36.55556
## 5      F  26        68        98.8 37.11111
## 6      M  37        79       101.3 38.50000</code></pre>
</div>
<div id="visualizzare-il-dataset-bodytemperature" class="section level2">
<h2><span class="header-section-number">4.4</span> Visualizzare il dataset BodyTemperature</h2>
<p>Passiamo ora a visualizzare il contenuto del dateset.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(BodyTemperature<span class="op">$</span>TempC )</code></pre>
<p><img src="bookdown_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(TempC <span class="op">~</span><span class="st"> </span>Gender, <span class="dt">data =</span> BodyTemperature)</code></pre>
<p><img src="bookdown_files/figure-html/unnamed-chunk-49-1.png" width="672" /></p>
<p>Vediamo ora come affiancare diversi plot e usiamo alcuni dei parametri delle funzioni di plot.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))
<span class="kw">hist</span>(BodyTemperature<span class="op">$</span>TempC, <span class="dt">main =</span> <span class="st">&quot;&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;°C&quot;</span>)
<span class="kw">boxplot</span>(TempC <span class="op">~</span><span class="st"> </span>Gender, <span class="dt">data =</span> BodyTemperature, <span class="dt">xlab =</span> <span class="st">&quot;Gender&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Temperature [°C]&quot;</span>)</code></pre>
<p><img src="bookdown_files/figure-html/unnamed-chunk-50-1.png" width="672" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))
<span class="kw">boxplot</span>(BodyTemperature<span class="op">$</span>TempC , <span class="dt">ylab =</span> <span class="st">&quot;Temperature [°C]&quot;</span>)
<span class="kw">boxplot</span>(TempC <span class="op">~</span><span class="st"> </span>Gender, <span class="dt">data =</span> BodyTemperature, <span class="dt">xlab =</span> <span class="st">&quot;Gender&quot;</span>)</code></pre>
<p><img src="bookdown_files/figure-html/unnamed-chunk-51-1.png" width="672" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))
<span class="kw">boxplot</span>(BodyTemperature<span class="op">$</span>TempC , <span class="dt">ylab =</span> <span class="st">&quot;Temperature [°C]&quot;</span>)
<span class="kw">boxplot</span>(TempC <span class="op">~</span><span class="st"> </span>Gender, <span class="dt">data =</span> BodyTemperature, <span class="dt">xlab =</span> <span class="st">&quot;Gender&quot;</span>)
<span class="kw">title</span>(<span class="st">&quot;Boxplots for Temperature&quot;</span>, <span class="dt">outer =</span> T, <span class="dt">line =</span> <span class="dv">-2</span>)</code></pre>
<p><img src="bookdown_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))
<span class="kw">hist</span>((BodyTemperature<span class="op">$</span>TempC) , <span class="dt">xlab =</span> <span class="st">&quot;Temperature [°C]&quot;</span>, <span class="dt">main =</span> <span class="st">&quot;&quot;</span>)
<span class="kw">boxplot</span>(TempC <span class="op">~</span><span class="st"> </span>Gender, <span class="dt">data =</span> BodyTemperature, <span class="dt">xlab =</span> <span class="st">&quot;Gender&quot;</span>)
<span class="kw">hist</span>(BodyTemperature<span class="op">$</span>TempC[BodyTemperature<span class="op">$</span>Gender <span class="op">==</span><span class="st"> &quot;F&quot;</span>],<span class="dt">freq =</span> <span class="ot">FALSE</span> ,<span class="dt">main =</span> <span class="st">&quot;Female&quot;</span>, <span class="dt">col =</span> <span class="st">&quot;pink&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;Temperature [°C]&quot;</span>)
<span class="kw">hist</span>(BodyTemperature<span class="op">$</span>TempC[BodyTemperature<span class="op">$</span>Gender <span class="op">==</span><span class="st"> &quot;M&quot;</span>],<span class="dt">freq =</span> <span class="ot">FALSE</span> ,<span class="dt">main =</span> <span class="st">&quot;Male&quot;</span>, <span class="dt">col =</span> <span class="st">&quot;skyblue&quot;</span> , <span class="dt">xlab =</span> <span class="st">&quot;Temperature [°C]&quot;</span>)</code></pre>
<p><img src="bookdown_files/figure-html/unnamed-chunk-53-1.png" width="960" /></p>
<p>Esistono altri comandi che si possono abbinare a quelli di visualizzazione visti fin qui, ad esempio <code>abline()</code>, <code>text()</code> e <code>lines()</code>.</p>
<p><em>Esercizio</em> Usare l’help per capire le funzionalità dei comandi precedenti e si usino per aggiungere informazioni ai grafici precedenti.</p>
</div>
<div id="analizzare-il-dataset-pima.tr2" class="section level2">
<h2><span class="header-section-number">4.5</span> Analizzare il dataset Pima.tr2</h2>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(MASS) <span class="co"># necessario per accedere al dataset</span>
<span class="kw">str</span>(Pima.tr2)</code></pre>
<pre><code>## &#39;data.frame&#39;:    300 obs. of  8 variables:
##  $ npreg: int  5 7 5 0 0 5 3 1 3 2 ...
##  $ glu  : int  86 195 77 165 107 97 83 193 142 128 ...
##  $ bp   : int  68 70 82 76 60 76 58 50 80 78 ...
##  $ skin : int  28 33 41 43 25 27 31 16 15 37 ...
##  $ bmi  : num  30.2 25.1 35.8 47.9 26.4 35.6 34.3 25.9 32.4 43.3 ...
##  $ ped  : num  0.364 0.163 0.156 0.259 0.133 ...
##  $ age  : int  24 55 35 26 23 52 25 24 63 31 ...
##  $ type : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 2 1 1 1 2 1 1 1 2 ...</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(Pima.tr2)</code></pre>
<pre><code>## [1] 300   8</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(Pima.tr2)</code></pre>
<pre><code>## [1] &quot;npreg&quot; &quot;glu&quot;   &quot;bp&quot;    &quot;skin&quot;  &quot;bmi&quot;   &quot;ped&quot;   &quot;age&quot;   &quot;type&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">?Pima.tr2
<span class="kw">head</span>(Pima.tr2)</code></pre>
<pre><code>##   npreg glu bp skin  bmi   ped age type
## 1     5  86 68   28 30.2 0.364  24   No
## 2     7 195 70   33 25.1 0.163  55  Yes
## 3     5  77 82   41 35.8 0.156  35   No
## 4     0 165 76   43 47.9 0.259  26   No
## 5     0 107 60   25 26.4 0.133  23   No
## 6     5  97 76   27 35.6 0.378  52  Yes</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(Pima.tr2)</code></pre>
<pre><code>##      npreg             glu              bp              skin      
##  Min.   : 0.000   Min.   : 56.0   Min.   : 38.00   Min.   : 7.00  
##  1st Qu.: 1.000   1st Qu.:101.0   1st Qu.: 64.00   1st Qu.:21.00  
##  Median : 3.000   Median :121.0   Median : 72.00   Median :29.00  
##  Mean   : 3.787   Mean   :123.7   Mean   : 72.32   Mean   :29.15  
##  3rd Qu.: 6.000   3rd Qu.:142.0   3rd Qu.: 80.00   3rd Qu.:36.00  
##  Max.   :14.000   Max.   :199.0   Max.   :114.00   Max.   :99.00  
##                                   NA&#39;s   :13       NA&#39;s   :98     
##       bmi             ped              age        type    
##  Min.   :18.20   Min.   :0.0780   Min.   :21.0   No :194  
##  1st Qu.:27.10   1st Qu.:0.2367   1st Qu.:24.0   Yes:106  
##  Median :32.00   Median :0.3360   Median :29.0            
##  Mean   :32.05   Mean   :0.4357   Mean   :33.1            
##  3rd Qu.:36.50   3rd Qu.:0.5867   3rd Qu.:40.0            
##  Max.   :52.90   Max.   :2.2880   Max.   :72.0            
##  NA&#39;s   :3</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which</span>(<span class="kw">is.na</span>(Pima.tr2))</code></pre>
<pre><code>##   [1]  804  834  836  853  854  863  871  885  887  888  889  898  899 1101
##  [15] 1102 1103 1104 1105 1106 1107 1108 1109 1110 1111 1112 1113 1114 1115
##  [29] 1116 1117 1118 1119 1120 1121 1122 1123 1124 1125 1126 1127 1128 1129
##  [43] 1131 1132 1133 1134 1135 1136 1137 1138 1139 1140 1141 1142 1143 1144
##  [57] 1145 1146 1147 1148 1149 1150 1151 1152 1153 1154 1155 1156 1157 1158
##  [71] 1159 1160 1161 1162 1163 1164 1165 1166 1167 1168 1169 1170 1172 1173
##  [85] 1174 1175 1176 1177 1178 1179 1180 1181 1182 1183 1184 1185 1186 1187
##  [99] 1188 1189 1190 1191 1192 1193 1194 1195 1196 1197 1198 1199 1200 1413
## [113] 1430 1468</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># amico di apply</span>
<span class="kw">lapply</span>(<span class="kw">lapply</span>(Pima.tr2 , is.na),which)</code></pre>
<pre><code>## $npreg
## integer(0)
## 
## $glu
## integer(0)
## 
## $bp
##  [1] 204 234 236 253 254 263 271 285 287 288 289 298 299
## 
## $skin
##  [1] 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217
## [18] 218 219 220 221 222 223 224 225 226 227 228 229 231 232 233 234 235
## [35] 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252
## [52] 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269
## [69] 270 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287
## [86] 288 289 290 291 292 293 294 295 296 297 298 299 300
## 
## $bmi
## [1] 213 230 268
## 
## $ped
## integer(0)
## 
## $age
## integer(0)
## 
## $type
## integer(0)</code></pre>
<p>Cosa possiamo fare con i diversi NA?</p>
<p>Un’idea ovviamente è quella di rimuovere le righe dove compare un NA</p>
<pre class="sourceCode r"><code class="sourceCode r">data_no_Na &lt;-<span class="st"> </span><span class="kw">na.omit</span>(Pima.tr2)

<span class="kw">dim</span>(data_no_Na)</code></pre>
<pre><code>## [1] 200   8</code></pre>
<p>Abbiamo rimosso un terzo del dataset…..</p>
<p>Rimuovere così tanti dati impoverisce significativamente il dataset, quindi magari si possono trovare soluzioni meno radicali.</p>
<p>Ad esempio, possiamo notare come gran parte dei NA siano nella variabile <em>skin</em>… se questa non ci interessa, possiamo evitare di rimuovere quelle righe!</p>
<pre class="sourceCode r"><code class="sourceCode r">data_no_Na &lt;-<span class="st"> </span><span class="kw">na.omit</span>(Pima.tr2[,<span class="op">-</span><span class="dv">4</span>])

<span class="kw">dim</span>(data_no_Na)</code></pre>
<pre><code>## [1] 284   7</code></pre>
<p>In questo modo abbiamo rimosso molte meno righe.
Si noti che alcune funzioni (vedi mean) hanno specifici argomenti per gestire i NA e si può quindi evitare di rimuoverli dal dataset ma gestirli i vari casi dalle funzioni</p>
<p>In alcuni casi, si preferisce non rimuovere alcun dato, ma piuttosto si sostituiscono i valori mancanti con informazioni prese dai dati correnti.</p>
<p>Ad esempio, si possono sostituire con la media, la mediana o si possono anche definire modelli più complessi per definire i sostituti.</p>
</div>
<div id="visualizzare-il-dataset-pima.tr2" class="section level2">
<h2><span class="header-section-number">4.6</span> Visualizzare il dataset Pima.tr2</h2>
<p>Usando gli strumenti di visualizzazione visti, si esplorino le relazioni tra le variabili del dataset.</p>
<p>Si faccia attenzione agli NA e si confrontino i risultati nei casi in cui:</p>
<ul>
<li>vengono rimosse tutte le righe contenenti NA;</li>
<li>vengono solo le righe contenenti NA nelle variabili di interesse;</li>
<li>vengono sostituiti gli NA con la media o la mediana della variabile;</li>
</ul>
</div>
<div id="esercizi-1" class="section level2">
<h2><span class="header-section-number">4.7</span> Esercizi</h2>
<div id="esercizio-1-1" class="section level3">
<h3><span class="header-section-number">4.7.1</span> Esercizio 1</h3>
<p>Si scarichi il dataset <a href="http://extras.springer.com/2012/978-1-4614-1301-1">AstmaLOS.txt</a> (<a href="https://www.dropbox.com/s/kjhafwojufpwaga/AsthmaLOS_description.txt?dl=0">descrizione</a>). Dopo averlo analizzato ed aver individuato eventuali errori nei dati relativi ad age e owner.type, si analizzi e visualizzi la variabile age. Si provino almeno due tecniche di rimozione degli errori dai dati e si confrontino i risultati.</p>
</div>
<div id="esercizio-2-1" class="section level3">
<h3><span class="header-section-number">4.7.2</span> Esercizio 2</h3>
<p>Si analizzi il dataset <em>hflights</em> e si scelga una destinazione. Si analizzino e visualizzino i dati relativi a lunghezza del volo e ritardi per tale destinazione. Inoltre si determini:</p>
<ul>
<li>il giorno in cui è possibile volare con minore probabilità di subire ritardo.</li>
<li>il giorno in cui è possibile volare con maggiore probabilità di subire la cancellazione del volo.</li>
</ul>
<!-- ## <a name="L3Ex3"></a>Esercizio 3

Si importi il [dataset](https://raw.githubusercontent.com/socviz/soc880/master/data/gapminder.csv) contenente i dati relativi alla aspettativa di vita, popolazione e prodotto interno lordo pro capite di 142 paesi del mondo.
Si aggreghino i dati per continenti e si visualizzi l'andamento dell'aspettativa di vita rispetto alle variabili tempo, reddito pro capite e popolazione. 
Si investighi una possibile trasformazione dei dati per rendere più informativa l'analisi e si ripetano le analisi sui dati trasformati. -->
<!-- #### [Soluzioni](./SvolgimentoEsL3.R) {-} -->
</div>
</div>
<div id="link-utili-2" class="section level2">
<h2><span class="header-section-number">4.8</span> Link utili</h2>
<ul>
<li><p>Questo sito presenta diversi <a href="http://college.cengage.com/mathematics/brase/understandable_statistics/7e/students/datasets/slr/frames/frame.html">datasets</a> che possono essere interessanti da esaminare.</p></li>
<li><p>A questo link è possibile trovare gli appunti di un ottimo corso di <a href="http://vissoc.co">data visualization</a> (in inglese).</p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lavorare-con-i-dati.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="fare-pratica-con-i-dati.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/04-VisDati.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown.pdf", "bookdown.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
