<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Lavorare con i dati | Note di R</title>
  <meta name="description" content="Questo libro riassume il contenuto del laboratorio di R del corso di Probabilità e Statistica Matematica dell’anno accademico 2018/2019" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Lavorare con i dati | Note di R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Questo libro riassume il contenuto del laboratorio di R del corso di Probabilità e Statistica Matematica dell’anno accademico 2018/2019" />
  <meta name="github-repo" content="rstudio/book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Lavorare con i dati | Note di R" />
  
  <meta name="twitter:description" content="Questo libro riassume il contenuto del laboratorio di R del corso di Probabilità e Statistica Matematica dell’anno accademico 2018/2019" />
  

<meta name="author" content="Federico Reali" />


<meta name="date" content="2019-06-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="primi-comandi-di-r.html">
<link rel="next" href="visualizzare-i-dati.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Note di R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Premessa</a></li>
<li class="chapter" data-level="1" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html"><i class="fa fa-check"></i><b>1</b> Primi passi con R</a><ul>
<li class="chapter" data-level="1.1" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#perche-r"><i class="fa fa-check"></i><b>1.1</b> Perché R</a></li>
<li class="chapter" data-level="1.2" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#installare-r"><i class="fa fa-check"></i><b>1.2</b> Installare R</a></li>
<li class="chapter" data-level="1.3" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#installare-r-1"><i class="fa fa-check"></i><b>1.3</b> Installare R</a></li>
<li class="chapter" data-level="1.4" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#usare-r"><i class="fa fa-check"></i><b>1.4</b> Usare R</a></li>
<li class="chapter" data-level="1.5" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#installare-r-studio"><i class="fa fa-check"></i><b>1.5</b> Installare R Studio</a></li>
<li class="chapter" data-level="1.6" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#usare-r-studio"><i class="fa fa-check"></i><b>1.6</b> Usare R Studio</a></li>
<li class="chapter" data-level="1.7" data-path="primi-passi-con-r.html"><a href="primi-passi-con-r.html#link-utili"><i class="fa fa-check"></i><b>1.7</b> Link utili</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html"><i class="fa fa-check"></i><b>2</b> Primi comandi di R</a><ul>
<li class="chapter" data-level="2.1" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#operazioni-aritmetiche"><i class="fa fa-check"></i><b>2.1</b> Operazioni Aritmetiche</a></li>
<li class="chapter" data-level="2.2" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#esponenziale-e-logaritmi"><i class="fa fa-check"></i><b>2.2</b> Esponenziale e logaritmi</a></li>
<li class="chapter" data-level="2.3" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#funzioni-trigonometriche"><i class="fa fa-check"></i><b>2.3</b> Funzioni Trigonometriche</a></li>
<li class="chapter" data-level="2.4" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#assegnazione-e-vettori"><i class="fa fa-check"></i><b>2.4</b> Assegnazione e vettori</a></li>
<li class="chapter" data-level="2.5" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#sequenze"><i class="fa fa-check"></i><b>2.5</b> Sequenze</a></li>
<li class="chapter" data-level="2.6" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#operazioni-su-vettori"><i class="fa fa-check"></i><b>2.6</b> Operazioni su vettori</a></li>
<li class="chapter" data-level="2.7" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#operatori-relazionali-e-logici"><i class="fa fa-check"></i><b>2.7</b> Operatori relazionali e logici</a></li>
<li class="chapter" data-level="2.8" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#matrici"><i class="fa fa-check"></i><b>2.8</b> Matrici</a></li>
<li class="chapter" data-level="2.9" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#stringhe-vettori-di-caratteri"><i class="fa fa-check"></i><b>2.9</b> Stringhe (vettori di caratteri)</a></li>
<li class="chapter" data-level="2.10" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#liste-e-data-frame"><i class="fa fa-check"></i><b>2.10</b> Liste e data frame</a></li>
<li class="chapter" data-level="2.11" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#programmazione-in-r"><i class="fa fa-check"></i><b>2.11</b> Programmazione in R</a></li>
<li class="chapter" data-level="2.12" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#esercizi"><i class="fa fa-check"></i><b>2.12</b> Esercizi</a></li>
<li class="chapter" data-level="2.13" data-path="primi-comandi-di-r.html"><a href="primi-comandi-di-r.html#link-utili-1"><i class="fa fa-check"></i><b>2.13</b> Link utili</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lavorare-con-i-dati.html"><a href="lavorare-con-i-dati.html"><i class="fa fa-check"></i><b>3</b> Lavorare con i dati</a><ul>
<li class="chapter" data-level="3.1" data-path="lavorare-con-i-dati.html"><a href="lavorare-con-i-dati.html#pacchetti"><i class="fa fa-check"></i><b>3.1</b> Pacchetti</a></li>
<li class="chapter" data-level="3.2" data-path="lavorare-con-i-dati.html"><a href="lavorare-con-i-dati.html#manipolare-dati"><i class="fa fa-check"></i><b>3.2</b> Manipolare dati</a></li>
<li class="chapter" data-level="3.3" data-path="lavorare-con-i-dati.html"><a href="lavorare-con-i-dati.html#missing-data"><i class="fa fa-check"></i><b>3.3</b> Missing data</a></li>
<li class="chapter" data-level="3.4" data-path="lavorare-con-i-dati.html"><a href="lavorare-con-i-dati.html#manipolare-i-dati"><i class="fa fa-check"></i><b>3.4</b> Manipolare i dati</a></li>
<li class="chapter" data-level="3.5" data-path="lavorare-con-i-dati.html"><a href="lavorare-con-i-dati.html#distribuzioni-di-probabilita"><i class="fa fa-check"></i><b>3.5</b> Distribuzioni di probabilità</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html"><i class="fa fa-check"></i><b>4</b> Visualizzare i dati</a><ul>
<li class="chapter" data-level="4.1" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#box-plot"><i class="fa fa-check"></i><b>4.1</b> Box plot</a></li>
<li class="chapter" data-level="4.2" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#istogrammi-e-scatter-plost"><i class="fa fa-check"></i><b>4.2</b> Istogrammi e scatter plost</a></li>
<li class="chapter" data-level="4.3" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#analizzare-il-dataset-body-temperature"><i class="fa fa-check"></i><b>4.3</b> Analizzare il dataset Body Temperature</a></li>
<li class="chapter" data-level="4.4" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#visualizzare-il-dataset-bodytemperature"><i class="fa fa-check"></i><b>4.4</b> Visualizzare il dataset BodyTemperature</a></li>
<li class="chapter" data-level="4.5" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#analizzare-il-dataset-pima.tr2"><i class="fa fa-check"></i><b>4.5</b> Analizzare il dataset Pima.tr2</a></li>
<li class="chapter" data-level="4.6" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#visualizzare-il-dataset-pima.tr2"><i class="fa fa-check"></i><b>4.6</b> Visualizzare il dataset Pima.tr2</a></li>
<li class="chapter" data-level="4.7" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#esercizi-1"><i class="fa fa-check"></i><b>4.7</b> Esercizi</a></li>
<li class="chapter" data-level="4.8" data-path="visualizzare-i-dati.html"><a href="visualizzare-i-dati.html#link-utili-2"><i class="fa fa-check"></i><b>4.8</b> Link utili</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="fare-pratica-con-i-dati.html"><a href="fare-pratica-con-i-dati.html"><i class="fa fa-check"></i><b>5</b> Fare pratica con i dati</a><ul>
<li class="chapter" data-level="5.1" data-path="fare-pratica-con-i-dati.html"><a href="fare-pratica-con-i-dati.html#inquinamento-a-san-andreas"><i class="fa fa-check"></i><b>5.1</b> Inquinamento a San Andreas</a></li>
<li class="chapter" data-level="5.2" data-path="fare-pratica-con-i-dati.html"><a href="fare-pratica-con-i-dati.html#inquinamento-in-california"><i class="fa fa-check"></i><b>5.2</b> Inquinamento in California</a></li>
<li class="chapter" data-level="5.3" data-path="fare-pratica-con-i-dati.html"><a href="fare-pratica-con-i-dati.html#inquinamento-a-los-angeles"><i class="fa fa-check"></i><b>5.3</b> Inquinamento a Los Angeles</a></li>
<li class="chapter" data-level="5.4" data-path="fare-pratica-con-i-dati.html"><a href="fare-pratica-con-i-dati.html#esercizi-2"><i class="fa fa-check"></i><b>5.4</b> Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="regressione.html"><a href="regressione.html"><i class="fa fa-check"></i><b>6</b> Regressione</a><ul>
<li class="chapter" data-level="6.1" data-path="regressione.html"><a href="regressione.html#regressione-lineare"><i class="fa fa-check"></i><b>6.1</b> Regressione lineare</a></li>
<li class="chapter" data-level="6.2" data-path="regressione.html"><a href="regressione.html#stimare-beta_0-e-beta_1"><i class="fa fa-check"></i><b>6.2</b> Stimare <span class="math inline">\(\beta_0\)</span> e <span class="math inline">\(\beta_1\)</span></a></li>
<li class="chapter" data-level="6.3" data-path="regressione.html"><a href="regressione.html#valutare-il-modello-r2"><i class="fa fa-check"></i><b>6.3</b> Valutare il modello: <span class="math inline">\(R^2\)</span></a></li>
<li class="chapter" data-level="6.4" data-path="regressione.html"><a href="regressione.html#regressione-lineare-in-r"><i class="fa fa-check"></i><b>6.4</b> Regressione lineare in R</a></li>
<li class="chapter" data-level="6.5" data-path="regressione.html"><a href="regressione.html#regressione-multipla"><i class="fa fa-check"></i><b>6.5</b> Regressione multipla</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="esercitazione-1.html"><a href="esercitazione-1.html"><i class="fa fa-check"></i><b>7</b> Esercitazione 1</a><ul>
<li class="chapter" data-level="7.1" data-path="esercitazione-1.html"><a href="esercitazione-1.html#esercizi-3"><i class="fa fa-check"></i><b>7.1</b> Esercizi</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Note di R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lavorare-con-i-dati" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Lavorare con i dati</h1>
<p><img src="media/Data_matrix.jpg" /></p>
<div id="before-starting-again" class="section level3 unnumbered">
<h3>Before Starting (again)!</h3>
<p>Abbiamo già visto come spostare la <em>working directory</em> in R Studio. Usando i comandi <code>getwd()</code> e <code>setwd()</code> ricordiamoci di selezionare la cartella relativa a questo corso. Per la lezione di oggi vediamo di organizzare la cartella del corso nel seguente modo.
La cartella, chiamata <em>R</em>, deve contenere a sua volta due cartelle: <em>data</em> e <em>source</em>. Nella prima salveremo i dataset che ci interessano, nella seconda lo script R della lezione.</p>
</div>
<div id="pacchetti" class="section level2">
<h2><span class="header-section-number">3.1</span> Pacchetti</h2>
<p>R, come molti altri linguaggi di programmazione, ha un core di funzioni già scritte che sono disponibili all’utente, come quelle che abbiamo visto nelle lezioni precedenti. Tuttavia, con il passare del tempo, sono state sviluppate sempre più funzioni che risolvono nuovi problemi e aumentano le potenzialità di R. Tuttavia non è possibile, ne desiderabile, aggiungere tutte queste funzioni al pacchetto base di R: questo lo renderebbe più lento, occuperebbe più memoria e sarebbe pieno di funzioni che l’utente medio non userebbe!</p>
<p>Questa filosofia è applicata a molti altri linguaggi di programmazione che propongono un set fondamentale di funzioni accessibile a tutti (<em>base</em>), e la possibilità di istallare o caricare delle estensioni per svolgere ulteriori compiti particolari.</p>
<p>In R queste estensioni sono i <em>pacchetti</em> (package). Si può accedere alla lista dei pacchetti installati usando il comando <code>library()</code>, senza indicare argomento. Se si indica come argomento il nome di un pacchetto, R caricherà il pacchetto ed il suo contenuto sarà disponibile per l’utente.</p>
<p>Ad esempio, possiamo caricare il pacchetto <em>MASS</em>, che ci sarà utile in seguito, con il comando <code>library(MASS)</code>.</p>
<p>Non tutti i pacchetti sono già installati in R, ad esempio il pacchetto <em>hflights</em> non lo è.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(hflights)</code></pre>
<p>Il comando da errore in quanto il pacchetto non è installato e lo possiamo installare usando il comando:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&#39;hflights&#39;</span>)
<span class="kw">library</span>(hflights)
<span class="co"># ora il pacchetto viene caricato senza errori!</span></code></pre>
<p>Alcuni pacchetti potrebbero dipendere da altri pacchetti non installati per funzionare. Per indicare a R di installare anche le dipendenze, basta inserire nel comando, dopo il nome del pacchetto l’istruzione <code>install.packages( nome_pacchetto , dependencies = TRUE)</code>.</p>
<p>Il comando <code>search()</code> elenca i pacchetti caricati nella sessione.</p>
<p>I pacchetti possono essere prodotti da qualsiasi utente e solitamente sono reperibili usando il comando indicato sopra. Di default R Studio si appoggia al sito <a href="https://cran.r-project.org/">cran</a> per reperire i pacchetti.</p>
<p>Qualora il pacchetto desiderato non fosse presente, è possibile indicare un diverso server. Ad esempio, il comando seguente permette di installare un pacchetto presente nei server di Bioconductor.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">source</span>(<span class="st">&quot;https://bioconductor.org/biocLite.R&quot;</span>)
<span class="kw">biocLite</span>(<span class="st">&quot;RnaSeqTutorial&quot;</span>)</code></pre>
<p>Analogamente, R Studio permette di installare i pacchetti manualmente, dal menù <strong>Tools | Install Packages… | Install from: | Package Archive File</strong>.</p>
<p>L’uso del nome del pacchetto seguito da <code>::</code>, permette di accedere le funzioni e i dataset contenuti nel pacchetto. Questo è molto utile nel caso di omonimia tra funzioni. Specificando il pacchetto si può essere sicuri di usare la funzione desiderata.</p>
</div>
<div id="manipolare-dati" class="section level2">
<h2><span class="header-section-number">3.2</span> Manipolare dati</h2>
<p>R fornisce alcuni dataset già disponibili all’uso, mentre altri se ne possono aggiungere usando specifici pacchetti.</p>
<p>Ad esempio, nella lezione precedente abbiamo lavorato con il dataset <em>mtcars</em> che è già disponibile. Usando i comandi precedenti abbiamo in realtà richiamato il pacchetto MASS che contiene diversi dataset e installato <em>hflights</em> che contiene un altro dataset che ci tornerà utile.</p>
<div id="leggere-e-scrivere-file" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Leggere e scrivere file</h3>
<p>Quando si parla di dati o dataset, è possibile acquisirne in diversi modi, non solo attraverso i pacchetti. Uno dei modi più semplici e intuitivi è la lettura da file. Esistono molti formati di che possono contenere dati. I più semplici e diffusi sono i file <em>.csv</em> (comma sepatated values) o i <em>.tsv</em> (tab separated values).</p>
<p>Uno dei comandi più usati per leggere file è il comando <code>read.table()</code>. Questo permette di leggere un file e di salvarlo come data frame. Facciamo un esempio pratico.</p>
<p>Consideriamo il dataset <a href="http://extras.springer.com/2012/978-1-4614-1301-1">body temperature</a> che contiene i dati relativi alla temperatura corporea di alcuni pazienti. Salviamo il dataset nella cartella <em>data</em> e leggiamolo usando la funzione <code>read.table()</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">BodyTemperature &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="dt">file =</span> <span class="st">&quot;./data/BodyTemperature.txt&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>)</code></pre>
<p>La funzione read.csv accetta anche <em>url</em> come argomento. In questo modo R scaricherà da solo il dataset e lo salverà nella variabile indicata.</p>
<pre class="sourceCode r"><code class="sourceCode r">BodyTemperature &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="kw">url</span>(<span class="st">&#39;http://extras.springer.com/2012/978-1-4614-1301-1/BodyTemperature.txt&#39;</span>), <span class="dt">sep=</span><span class="st">&quot; &quot;</span>)
<span class="kw">head</span>(BodyTemperature)</code></pre>
<pre><code>##   Gender Age HeartRate Temperature
## 1      M  33        69        97.0
## 2      M  32        72        98.8
## 3      M  42        68        96.2
## 4      F  33        75        97.8
## 5      F  26        68        98.8
## 6      M  37        79       101.3</code></pre>
<p>Gli argomenti del comando, oltre a specificare il percorso in cui si trova il file da leggere, indicano che sono presenti degli <em>header</em>, cioè intestazioni che riportano il nome delle variabili, e che il separatore usato nel file per indicare i diversi elementi delle righe è lo spazio. Lo spazio è il separatore di default di <code>read.table()</code> ma è possibile indicarne di diversi. Se il file fosse stato un csv (<em>comma separated values</em>) avremmo indicato <code>sep=&quot;,&quot;</code>. Allo stesso modo avremmo potuto usare la funzione <code>read.csv()</code> che considera la virgola come separatore di default. Se i valori fossero stati separati da punto e virgola avremmo potuto usare <code>read.csv2()</code> e <code>read.delim()</code> se separate da tab (.</p>
<p>In modo del tutto simile, la funzione <code>write.table()</code> permette di scrivere un data frame (o una variabile) in un file. Ad esempio, il comando seguente scrive il dataset scaricato da internet nella cartella data come file csv.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.csv</span>(BodyTemperature, <span class="st">&quot;./data/BodyTemperature.txt&quot;</span>)</code></pre>
</div>
<div id="esplorare-i-file" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Esplorare i file</h3>
<p>Una volta letto o caricato il dataset che ci interessa è ora di iniziare ad analizzare i <a href="http://phdcomics.com/comics.php?f=1816">dati</a> che contiene. Spesso i dataset sono accompagnati da delle descrizioni che ne spiegano il contenuto ed è buona regola leggerle.</p>
<p>Possiamo visualizzare la testa del dataset o la coda, usando i comandi <code>head()</code> e <code>tail()</code> o anche visualizzare l’intero dataset in una finestra di R Studio usando il comando <code>View()</code>. Possiamo conoscerne le dimensioni con la funzione <code>dim()</code> e possiamo conoscere i nomi delle colonne con la funzione <code>names()</code>.
<code>str()</code> restituisce invece informazioni sulla struttura del dataset. In R Studio, l’equivalente di questo comando è accessibile nella finesta <strong>Environment</strong>. L’uso di queste funzioni è sempre utile per iniziare a capire i dati con cui si ha a che fare.</p>
<p>Una funzione utilissima è <code>summary()</code>. Questa restituisce diverse informazioni per le <em>variabili numeriche</em>: minimo, massimo, media e i quartili. Va specificato <em>numeriche</em> in quanto un data frame potrebbe anche contenere delle variabili non numeriche. Nel caso di BodyTemperature ad esempio, la prima colonna è la variabile categorica del sesso del paziente.</p>
<p>Altre funzione utili sono le funzioni come <code>mean()</code> e <code>sd()</code> che ci restituiscono media e standard deviation dell’argomento passato.
Le funzioni <code>IQR()</code> e <code>range()</code> restituiscono la distanza interquartile ed il range.</p>
<p>Un utile comando per applicare funzioni pensate per elementi scalari agli elementi di un array o una matrice è la funzione <code>apply()</code>. Tale funzione è utile anche per applicare funzioni lungo una sola dimensione. Le varianti <code>lapply()</code> e <code>tapply()</code> funzionano in modo simile. Un altro comando per la manipolazione di dati è <code>round()</code> che arrotonda un valore o un vettore all’intero più vicino, o indicando il numero di cifre decimali, arrotonda fino alle cifre decimali indicati.</p>
<p>Altre funzioni utili sono <code>sort()</code>, che ordina gli elementi di un vettore, <code>unique()</code> che rimuove le entrate ripetute da array o data frame. Le funzioni come <code>any()</code> e <code>which()</code> verificano se una condizione è soddisfatta. La prima restituisce <code>TRUE</code> se almeno un elemento che verifica la condizione, mentre <code>which()</code> che riporta l’indice degli elementi che la soddisfano.</p>
<p>Vediamo alcuni esempi con il dataset <code>BodyTemperature</code>.</p>
</div>
<div id="factors" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Factors</h3>
<p>A volte alcune variabili categoriche sono salvate come variabili numeriche. Esploriamo ad esempio il dataset <em>birthwt</em> (birth weight) contenuto nel pacchetto MASS. Possiamo notare che alcune variabili, sebbene siano numeriche, rappresentano delle categorie: ad esempio fumatori o no, o ipertesi o no. Tuttavia, se usiamo il comando <code>summary()</code>, vediamo che vengono trattate come variabili numeriche. Il comando <code>as.factor()</code> permette di convertire variabili numeriche in variabili categoriche.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(MASS)
birthwt1 &lt;-<span class="st"> </span>birthwt
birthwt1<span class="op">$</span>race &lt;-<span class="st"> </span><span class="kw">as.factor</span>(birthwt1<span class="op">$</span>race)</code></pre>
<p>Dalla descrizione delle variabili fornita da R Studio nella finestra <strong>Environment</strong>, possiamo vedere che dopo l’assegnazione, race è indicato come factor, non più integer.</p>
<p>La funzione <code>table()</code> costruisce una contingency table tra le combinazioni di factors mentre <code>levels()</code> restituisce gli attributi di livello di una variabile. Usando <code>levels()</code> è anche possibile assegnare o variare gli attributi di livello.</p>
</div>
</div>
<div id="missing-data" class="section level2">
<h2><span class="header-section-number">3.3</span> Missing data</h2>
<p>Spesso i dati forniti contengono valori non affidabili, oppure ci sono errori in qualche riga o ancora mancano dei valori. Questo è un grande problema, sia perché, se non riconosciuti in anticipo, questi valori possono influenzare i nostri risultati, sia perché non esistono protocolli standard per affrontare questi casi.</p>
<p>Alcuni elementi posso non essere stati inseriti ed essi solitamente vengono segnalati con NA (not available). R ha una funzione dedicata per trovare questi elementi: <code>is.na()</code>. Tale funzione restituisce valori booleani per indicare se il contenuto è NA o no. Analogamente, <code>na.omit()</code> restituisce l’argomento privato delle righe contenenti NA.</p>
<p>In modo del tutto analogo funziona il comando <code>is.nan()</code> che però verifica se il contenuto è NaN (not a number). Esistono anche i controlli <code>is.infinite()</code> e <code>is.finite()</code> che verificano se ci sono valori <code>Inf/-Inf</code>.</p>
</div>
<div id="manipolare-i-dati" class="section level2">
<h2><span class="header-section-number">3.4</span> Manipolare i dati</h2>
<p>Abbiamo ampiamente visto come lavorare e manipolare i dati. Tuttavia un importante funzione che permette di raggruppare i dati non è stata spiegata in classe: si tratta di <code>aggregate()</code>. Tale comando, permette di applicare una funzione ad un sottoinsieme dei dati, seguendo uno schema preciso. Vediamo alcuni esempi.</p>
<p>Altro utile comando è <code>merge()</code> che permette di unire dataframe indicando il campo da usare per confrontare le entrate. In modo più semplice, e dopo essersi assicurati che le osservazioni siano “allineate”, è possibile usare anche i comandi <code>rbin()</code> e <code>cbind()</code> che sono già stati trattati.</p>
</div>
<div id="distribuzioni-di-probabilita" class="section level2">
<h2><span class="header-section-number">3.5</span> Distribuzioni di probabilità</h2>
<p>R ci permette di accedere a molte distribuzioni di probabilità attraverso delle apposite funzioni che sono contenuto nel pacchetto <em>stast</em>, che va quindi caricato.</p>
<p>Le distribuzioni sono accessibili attraverso delle funzioni che richiamano il nome della distribuzione, ad esempio con <em>norm</em>, <em>binom</em> e <em>gamma</em>, solo per citarne alcune, si accede alla distribuzione normale, binomiale e gamma. A tale nome si aggiunge un <em>prefisso</em>, che serve a specificare se si è interessati alla funzione densità (<em>d</em>), alla distribuzione (<em>p</em>), alla funzione che riporta i quantili (<em>q</em>) o se si vogliono generare dei numeri usando tale distribuzione (<em>r</em>).</p>
<p>Cercando <em>distribution</em> nell’help è possibile accedere all’elenco di tutte le distribuzioni di R. Il fatto che R permetta di accedere facilmente alle distribuzioni tornerà particolarmente utile quando lavoreremo con gli intervalli di confidenza, e potremmo interrogare R, piuttosto che lavorare con la versione tabulare delle stesse.</p>
<p>Va segnalata, almeno per la distribuzione normale, che esiste la funzione <code>qqnorm</code> che permette di confrontare graficamente i quantili dei propri dati con quelli della distribuzione normale. Questo è un modo per verificare graficamente (e quindi non formalmente) se i propri dati seguono una distribuzione normale. Insieme alla richiesta che le misurazioni siano indipendenti, queste due sono delle ipotesi che abbiamo visto molto spesso, specialmente nell’uso di teoremi limite.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="primi-comandi-di-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualizzare-i-dati.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-Dati.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown.pdf", "bookdown.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
